<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Infrastructure - rolling</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        
        <link rel="stylesheet" href="railview.css">
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <noscript>
            <style type="text/css">
                .javascript-only {
                    display: none;
                }
            </style>
        </noscript>

    </head>
    <body class="light">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme;
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="rolling.html">Rolling</a></li><li><a href="model.html"><strong aria-hidden="true">1.</strong> Simulation model</a></li><li><ol class="section"><li><a href="dgraph.html" class="active"><strong aria-hidden="true">1.1.</strong> Infrastructure</a></li><li><a href="routes.html"><strong aria-hidden="true">1.2.</strong> Interlocking</a></li><li><a href="dispatch.html"><strong aria-hidden="true">1.3.</strong> Dispatch</a></li><li><a href="simexamples.html"><strong aria-hidden="true">1.4.</strong> Examples</a></li><li><ol class="section"><li><a href="examples/simplestop.html"><strong aria-hidden="true">1.4.1.</strong> Simple stop</a></li><li><a href="examples/single.html"><strong aria-hidden="true">1.4.2.</strong> Single track</a></li><li><a href="examples/twotrack.html"><strong aria-hidden="true">1.4.3.</strong> Two track station</a></li><li><a href="examples/multipletrains.html"><strong aria-hidden="true">1.4.4.</strong> Multiple trains</a></li><li><a href="examples/partialrelease.html"><strong aria-hidden="true">1.4.5.</strong> Partial release</a></li><li><a href="examples/twoway.html"><strong aria-hidden="true">1.4.6.</strong> Two-way traffic</a></li></ol></li></ol></li><li><a href="planner.html"><strong aria-hidden="true">2.</strong> Planning model</a></li><li><ol class="section"><li><a href="plannerexamples.html"><strong aria-hidden="true">2.1.</strong> Verification examples</a></li><li><ol class="section"><li><a href="examples/runningtime.html"><strong aria-hidden="true">2.1.1.</strong> Running time</a></li><li><a href="examples/frequency.html"><strong aria-hidden="true">2.1.2.</strong> Consecutive train frequency</a></li><li><a href="examples/overtaking.html"><strong aria-hidden="true">2.1.3.</strong> Overtaking</a></li><li><a href="examples/crossing.html"><strong aria-hidden="true">2.1.4.</strong> Crossing</a></li></ol></li></ol></li><li><a href="tools.html"><strong aria-hidden="true">3.</strong> Input conversion from railML</a></li><li><ol class="section"><li><a href="examples/railml_trivial.html"><strong aria-hidden="true">3.1.</strong> railML trivial example</a></li><li><a href="examples/railml_twotrack.html"><strong aria-hidden="true">3.2.</strong> railML two track</a></li></ol></li><li><a href="casestudies.html"><strong aria-hidden="true">4.</strong> Case studies</a></li><li><ol class="section"><li><a href="examples/case_valebo.html"><strong aria-hidden="true">4.1.</strong> Valeb√∏</a></li><li><a href="examples/case_kolbotn.html"><strong aria-hidden="true">4.2.</strong> Kolbotn</a></li><li><a href="examples/case_eidsvoll.html"><strong aria-hidden="true">4.3.</strong> Eidsvoll</a></li><li><a href="examples/case_holmlia.html"><strong aria-hidden="true">4.4.</strong> Holmlia</a></li><li><a href="examples/case_asker.html"><strong aria-hidden="true">4.5.</strong> Asker</a></li><li><a href="examples/case_arna.html"><strong aria-hidden="true">4.6.</strong> Arna A20</a></li><li><a href="examples/case_arna_byhand.html"><strong aria-hidden="true">4.7.</strong> Arna A20 by hand</a></li></ol></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons javascript-only">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">rolling</h1> 

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="searchbar-outer" class="searchbar-outer">
                    <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </div>
                <div id="searchresults-outer" class="searchresults-outer">
                    <div class="searchresults-header" id="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="dgraph.html#infrastructure-" id="infrastructure-"><h1>Infrastructure üåç</h1></a>
<p>The <code>rolling</code> infrastructure model uses a double node graph model. To understand the motivation for the double node graph, consider the
railway junction in the figure below.</p>
<p><img src="dgraph1.png" alt="Dgraph 1" /></p>
<p>On the railway network, paths p-q-r and p-q-u exist, in both directions. However, in a conventional undirected graph representation, there would also be a path r-q-u.</p>
<p><img src="dgraph2.png" alt="Dgraph 2" /></p>
<p>When we extend the graph concept to include two sides of each node, there is no longer a path r-q-u.</p>
<p><img src="dgraph3.png" alt="Dgraph 3" /></p>
<p>So, the double node graph is similar to a graph, with the difference that each node has two sides. A train entering a node from an edge connected to one side of the node can only exit the node through edges on the opposide side of the node.</p>
<p>This model allows a sense of <em>local directedness</em> without deciding on a global direction concept such as up/down or outgoing/incoming often used in railway engineering. A global directionality requires considering special cases to handle railway networks where
a train's up/down direction may change without the train reversing its direction, such as the <a href="examples/baloon.md">balloon loop example</a>.</p>
<p>Each side of the node may have a set of <em>objects</em>, which are read by a passing train on the <strong>exit side</strong> of the node, i.e. the opposite side of the node from the edge on which the train entered.</p>
<p><img src="dgraphsides.png" alt="Dgraph sides" /></p>
<a class="header" href="dgraph.html#input-format" id="input-format"><h2>Input format</h2></a>
<p>The DGraph input file format consists of statements separated by whitespace which describe the double nodes, both sides together, and various edge types with corresponding lengths.</p>
<a class="header" href="dgraph.html#nodes-" id="nodes-"><h2>Nodes üî∂</h2></a>
<p>The syntax for describing nodes is as follows:</p>
<pre><code class="language-haskell">node &lt;name&gt;[(&lt;objects&gt;)]-&lt;name&gt;[(&lt;objects&gt;)]
</code></pre>
<p>Examples:</p>
<pre><code class="language-haskell">node n1-n2
node n2-n3(signal s1)
node n3(enter sec1)-n4
</code></pre>
<a class="header" href="dgraph.html#edges-" id="edges-"><h2>Edges ‚Üî</h2></a>
<p>Edges are either <strong>linear</strong>, <strong>switches</strong> or <strong>boundaries</strong>. Each node may only be mentioned in one edge statement. Nodes which are not mentioned in edge statements are assumed to be the end of a track.</p>
<a class="header" href="dgraph.html#linear" id="linear"><h3>Linear</h3></a>
<p>Linear edges simply connect two nodes by a length of track using the syntax <code>linear &lt;node&gt;-&lt;node&gt; &lt;distance&gt;</code>.</p>
<p>Example:</p>
<pre><code class="language-haskell">linear n1-n2 124.5
</code></pre>
<a class="header" href="dgraph.html#switches" id="switches"><h3>Switches</h3></a>
<p>Switches
Currently, only two-way switches are supported.</p>
<p>Example:</p>
<pre><code class="language-haskell">switch sw1 left n1-(n2 200.0, n3 220.0)
</code></pre>
<a class="header" href="dgraph.html#boundaries" id="boundaries"><h3>Boundaries</h3></a>
<p>Boundaries are nodes where a train may enter or leave the model. When entering, the train's front simply appears at the node, while the body of the train is still outside of the model. When leaving, the front of the train visits the boundary node and the train travels on until the back of the train visits the boundary node, after which the train is considered to be finished.</p>
<p>The name of the boundary node is used in dispatch plans and in route files to refer to the location of the model boundary.</p>
<p>The syntax is <code>boundary &lt;node&gt;</code>.</p>
<p>Example:</p>
<pre><code class="language-haskell">boundary n1
</code></pre>
<a class="header" href="dgraph.html#objects" id="objects"><h2>Objects</h2></a>
<p>Each node may contain zero or more objects, which appear within the parentheses after the node name in the <code>node</code> statement.</p>
<p>The possible object types are:</p>
<ul>
<li>
<p><strong>Signal üö¶</strong>: a signal with the given name is located at the current node. Note that this has no actual impact on trains, as only the <code>sight</code> statements can add the signal to the train's communication list. This statement is used for visualization purposes.</p>
<p>Syntax: <code>signal &lt;name&gt;</code></p>
<p>Example: <code>signal sig1</code></p>
</li>
<li>
<p><strong>Enter section ‚¨á</strong>: a train whose front passes the current node will enter a detection section. Note that a train detector (e.g. axle counter) or a track circuit border will typically need to be translated into four <code>enter</code>/<code>exit</code> statements, an <code>enter</code> for the section on each side of the detector, and an <code>exit</code> for each section on the opposite sides. The rationale for this representation is that it is a low-level instruction that the train can simply read and execute, and that is allows for more exotic train detection setups, such as overlapping sections.</p>
<p>Syntax: <code>enter &lt;section-name&gt;</code></p>
<p>Example: <code>enter section1</code></p>
</li>
<li>
<p><strong>Exit section ‚¨Ü</strong>: a train whose back passes the current node will exit a detection section.</p>
<p>Syntax: <code>exit &lt;section-name&gt;</code></p>
<p>Example: <code>exit section1</code></p>
</li>
<li>
<p><strong>Sight üëÅ</strong>: after visiting the current node, trains can <em>see</em> a given signal for a given travel distance. Typically, this node will appear at a given distance before a signal, and the given distance will be the travel distance from the sight object's node to the signal.</p>
<p>Syntax: <code>sight &lt;signal-name&gt; &lt;distance&gt;</code></p>
<p>Example: <code>signal sig1 400.0</code></p>
</li>
</ul>
<p><em>Switches</em> may also be considered to be objects, but appear in their own statements since they also relate nodes (see the <a href="dgraph.html#switches">switches section</a>).</p>
<p>An example of various objecs on a double node statement:</p>
<pre><code class="language-haskell">node n1(enter section1, exit section2)
    -n2(signal sig1, sight sig2 800.0, exit section1, enter section2)
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="model.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="routes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="model.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="routes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if (getComputedStyle(document.querySelector(".fa")).fontFamily !== "FontAwesome") {
                var link = document.createElement('link');
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = '_FontAwesome/css/font-awesome.css';
                document.head.insertBefore(link, document.head.firstChild)
            }
        </script>

        

        

        

        
        <script src="searchindex.js" type="text/javascript" charset="utf-8"></script>
        
        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        

    </body>
</html>
